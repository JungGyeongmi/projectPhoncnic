<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="setContent(content)">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Phoncnic</title>
        <style>
            html,
            body {
                height: 100%;
            }

            a {
                text-decoration: none;
                color: unset;
            }

            .list-group-flush .list-group-item-action:hover {
                background-color: #DBE9B7 !important;
            }

            #nav {
                background-color: white;
            }

            #wrapper {
                height: 100%;
                min-height: 100%;
                background-color: white;
                background-repeat: no-repeat;
                background-size: cover;
            }

            .my.container-fluid {
                height: 91%;
                width: 100%;
                padding: 0;
            }

            #loginUserPicture {
                border-radius: 50%;
            }

            i,
            button:active {
                outline: none;
                border: none;
            }

            i,
            img,
            button:focus {
                border: none;
                outline: none;
            }

            .d-flex {
                -ms-overflow-style: none;
            }

            .d-flex::-webkit-scrollbar {
                display: none;
            }

            #helpbtn {
                position: absolute;
                bottom: 10px;
                right: 10px;
            }

            #helpbtn:hover {
                position: absolute;
                bottom: 40px;
                right: 10px;
            }

            #explain>p {
                font-family: 'GmarketSansMedium';
                margin-bottom: 0.5rem;
            }
        </style>
        <style>
            #hint {
                display: block;
            }

            .arrow_box {
                position: absolute;
                background: white;
                border: 2px solid #f5f5f5;
                width: 250px;
                height: 100px;
                padding: 14px;
                text-align: center;
                bottom: 100px;
                right: 25px;
                border-radius: 10px;
                font-size: 24px;
                color: black;
                font-family: 'NeoDunggeunmo';
            }

            .arrow_box:after,
            .arrow_box:before {
                top: 100%;
                left: 90%;
                content: "";
                height: 0;
                width: 0;
                position: absolute;
                pointer-events: none;
            }

            .arrow_box:after {
                border-top: 20px solid #ffffff;
                border-right: 10px solid transparent;
                border-left: 10px solid transparent;
            }

            .arrow_box:before {
                border-top: 20px solid #9a9a9a;
                border-right: 10px solid transparent;
                border-left: 10px solid transparent;
            }

            .arrow_box,
            #helpbtn {
                z-index: 3;
            }
            
            #userInfoToggle,
            #listTogglePhon{
                cursor: pointer;
            }
        </style>
        </style>
        <!-- awsome icon cdn -->
        <script src="https://kit.fontawesome.com/f145f2fd92.js" crossorigin="anonymous"></script>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" th:href="@{/assets/picnic-basket.png}" />
        <!-- Google NotoSans -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300&display=swap" rel="stylesheet">
        <!-- Core theme CSS (includes Bootstrap)-->
        <link th:href="@{/css/styles.css}" rel="stylesheet" />
        <!-- jQuery cdn -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <!-- sweetalert -->
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        <!-- boot strap icon -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
        <link th:href="@{/css/basic.css}" rel="stylesheet" />
        <!-- swal modal custom css -->
        <link th:href="@{/css/swalModal.css}" rel="stylesheet" />
    </head>

    <body>
        <div class="d-flex" id="wrapper">
            <!-- Page content wrapper-->
            <div id="page-content-wrapper">
                <!-- Top navigation-->
                <nav class="navbar navbar-expand-lg " id="nav">
                    <div class="container-fluid">
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <!-- 로고 -->
                            <a th:href="@{/}" style="display: block; margin: auto;">
                                <img th:src="@{/button/logo_bold.png}" style="width:60px;">
                            </a>
                        </div>
                        <img th:src="@{/icon/Carrot_Bonus.ico}" alt="😎" width="50px" id="sidebarToggle"
                            style="cursor: pointer;">
                    </div>
                </nav>
                <!-- Page content-->
                <div class="container-fluid my">

                    <div class="arrow_box" id="hint">클릭하면 도움말을 볼 수 있어요!</div>
                    <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#basiceModal" id="helpbtn">
                        <img th:src="@{/icon/question-60.png}" alt="">
                    </button>

                    <!-- Modal -->
                    <div class="modal fade" id="basiceModal" tabindex="-1" aria-labelledby="basicModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog modal-lg modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="basicModalLabel" style="margin-top: 0;">Gallery 사용 설명서
                                    </h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <p>Gallery 페이지는 스크롤 또는 좌, 우 버튼으로 작품을 감상할 수 있습니다.</p>
                                    <p>좌측 하단 큐레이터를 클릭하면 작품 제목, 작품 설명, 작가명으로 검색할 수 있습니다.</p>
                                    <p>작품과 검색결과를 클릭하면 작품 상세페이지로 이동합니다.</p>
                                    <p>나의 캐릭터를 클릭하면 Character Look을 변경할 수 있습니다.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <th:block th:replace="${content}"></th:block>
                </div>
            </div>
            <!-- Sidebar-->
            <div class="border-end bg-white" id="sidebar-wrapper">
                <a class="list-group-item list-group-item-light p-3" th:href="@{/}">
                    <h2>Phoncnic</h2>
                </a>
                <div class="list-group list-group-flush">
                    <a class="list-group-item list-group-item-action list-group-item-light p-3"
                        sec:authorize="isAnonymous()" th:href="@{/member/login}">
                        <img src="https://img.icons8.com/fluency/48/000000/google-logo.png" width="10%"> 로그인 </a>
                    <div id="userInfoToggle" class="list-group-item list-group-item-light p-3"
                        sec:authorize="isAuthenticated()">
                        <span hidden id="loginUserPictureSrc" sec:authentication='principal.attr["picture"]'></span>
                        <span hidden id="loginUserRole" sec:authentication='principal.authorities'></span>
                        <div style="display:inline;">
                            <i style="color: gold; position: absolute;  padding-left: 1%; top: 0; font-size: 2rem;"
                                class="fa-solid fa-crown" sec:authorize="hasRole('ROLE_ADMIN')"></i>
                            <img id="loginUserPicture" src="" alt="" width="20%">
                        </div>
                        <span sec:authentication="principal.nickname"></span>
                    </div>

                    <a class="list-group-item list-group-item-action list-group-item-light p-3 list-mem-toggle"
                        style="display: none;" sec:authorize="isAuthenticated()" th:href="@{/member/logout}">로그아웃</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3 list-mem-toggle"
                        style="display: none;" sec:authorize="isAuthenticated()" th:href="@{/main/mypage}">마이페이지</a>

                    <a class="list-group-item list-group-item-action list-group-item-light p-3" id="listTogglePhon">폰크닉
                        시작</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3 list-phon-toggle"
                        style="display: none;" th:href="@{/crossroad}">산책하기</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3 list-phon-toggle"
                        style="display: none;" th:href="@{/gallery/}">전시장입구</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3 list-phon-toggle"
                        style="display: none;" th:href="@{/dyning/cafe/list?page=1&top=440&left=40}">카페거리</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3  list-phon-toggle"
                        style="display: none;" th:href="@{/dyning/restaurant/list?page=1&top=440&left=40}">식당거리</a>


                    <a class="list-group-item list-group-item-action list-group-item-light p-3"
                        th:href="@{/help/list/}">고객센터</a>

                    <a class="list-group-item list-group-item-action list-group-item-light p-3"
                        th:href="@{/main/companyinfo}">회사소개</a>


                    <a class="list-group-item list-group-item-action list-group-item-light p-3"
                        sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/index}">인덱스</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3"
                        sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin}">권력!</a>

                </div>
            </div>
        </div>
        <!-- bootstrap js cdn -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script th:src="@{/js/scripts.js}"></script>
        <script th:inline="javascript">
            $(function () {
                function toggleClass(target){
                    if(target.css("display")!="block"){
                        target.css("display", "block");
                    } else {
                        target.css("display", "none");
                    }
                }

                $(document).on("click", "#listTogglePhon",function() {
                    toggleClass($(".list-phon-toggle"));
                });

                $(document).on("click", "#userInfoToggle",function() {
                    toggleClass($(".list-mem-toggle"));
                });

                var loginUserProfileSrc = $("#loginUserPictureSrc").text();
                var loginUserPicture = $("#loginUserPicture")
                var userInfoToggle = $("#userInfoToggle")
                var loginUserRole = $("#loginUserRole").text();

                if (loginUserProfileSrc != "" || loginUserProfileSrc != null) {
                    loginUserPicture.attr("src", loginUserProfileSrc)
                }

                if (loginUserRole == "[ROLE_ADMIN]") {
                    userInfoToggle.css("border", "solid 5px gold");
                }
            });

            $("#helpbtn").hover(function (e) {
                $("#hint").css("display", "none");
            });
        </script>
    </body>
</th:block>

</html>