<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="setContent(content)">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Phoncnic</title>
        <style>
            .list-group-flush .list-group-item-action:hover {
                background-color: #DBE9B7 !important;
            }
            /* #nav {
                background-color: #FDFDF6;
            }
            #wrapper {
                background-color: #FDFDF6;
            } */
            
            #nav {
                background-color: white;
            }

            #wrapper {
                height: 100%;
                min-height: 100%;
                overflow-y: hidden;

                background-color: white;
                background-repeat: no-repeat;
                background-size: cover;
            }

            .my.container-fluid{
                height: 91%;
                width:100%;
                padding: 0;
            }

            #loginUserPicture{
                border-radius: 50%;
            }

        </style>
        <!-- awsome icon cdn -->
        <script src="https://kit.fontawesome.com/f145f2fd92.js" crossorigin="anonymous"></script>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" th:href="@{/assets/picnic-basket.png}" />
        <!-- Google NotoSans -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300&display=swap" rel="stylesheet">
        <!-- Core theme CSS (includes Bootstrap)-->
        <link th:href="@{/css/styles.css}" rel="stylesheet" />
        <!-- jQuery cdn -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <!-- sweetalert -->
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        <!-- boot strap icon -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
        <!-- boot strap css -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" th:href="@{/css/basic.css}">
    </head>
    
    <body>
        <div class="d-flex" id="wrapper">
            <!-- Page content wrapper-->
            <div id="page-content-wrapper">
                <!-- Top navigation-->
                <nav class="navbar navbar-expand-lg " id="nav" >
                    <div class="container-fluid">
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <!-- 로고 -->
                            <a th:href="@{/}" style="display: block; margin: auto;">
                                <img th:src="@{/button/Logo.png}" style="width:60px;" >
                            </a>
                        </div>
                        <button class="btn" id="sidebarToggle">
                            <img th:src="@{/icon/line-icon.png}" alt="표시할 수 없음" width="50px">
                        </button>
                    </div>
                </nav>
                <!-- Page content-->
                <div class="container-fluid my">
                    <th:block th:replace="${content}"></th:block>
                </div>
            </div>
            <!-- Sidebar-->
            <div class="border-end bg-white" id="sidebar-wrapper">
                <a class="list-group-item list-group-item-light p-3" th:href="@{/}">
                    <h2>Phoncnic</h2>
                </a>
                <!-- <a th:href="@{/}"><div class="sidebar-heading border-bottom bg-light">Start Bootstrap</div></a> -->
                <div class="list-group list-group-flush">
                    <a class="list-group-item list-group-item-action list-group-item-light p-3"
                        sec:authorize="isAnonymous()"
                        th:href="@{/member/login}">Google로 로그인</a>
                    <div id="userInfoToggle" class="list-group-item list-group-item-light p-3"
                        sec:authorize="isAuthenticated()">
                        <span hidden id="loginUserPictureSrc" sec:authentication='principal.attr["picture"]'></span>
                        <span hidden id="loginUserRole" sec:authentication='principal.authorities'></span>
                        <div style="display:inline;">
                            <i style="color: gold; position: absolute;  padding-left: 1%; top: 0; font-size: 2rem;" sec:authorize="hasRole('ROLE_ADMIN')" class="fa-solid fa-crown"></i>
                            <img id="loginUserPicture" src="" alt="" width="20%">
                        </div>
                        <span sec:authentication="principal.nickname"></span>
                    </div>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3"
                        sec:authorize="isAuthenticated()"
                        th:href="@{/member/logout}">로그아웃</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3"
                        th:href="@{/main/mypage}">마이페이지</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3"
                        th:href="@{/help/list/}">고객센터</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3"
                        th:href="@{/main/companyinfo}">회사소개</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3"
                        sec:authorize="hasRole('ROLE_ADMIN')"
                        th:href="@{/index}">인덱스</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3"
                        sec:authorize="hasRole('ROLE_ADMIN')"
                        th:href="@{/admin}">관리자</a>
                </div>
            </div>
        </div>
        <!-- bootstrap js cdn -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script th:src="@{/js/scripts.js}"></script>
        <script th:inline="javascript">
            $(function() {
                
                var loginUserProfileSrc = $("#loginUserPictureSrc").text();
                var loginUserPicture = $("#loginUserPicture")
                var userInfoToggle = $("#userInfoToggle")
                var loginUserRole = $("#loginUserRole").text();

                if(loginUserProfileSrc!="" || loginUserProfileSrc !=null){
                    loginUserPicture.attr("src", loginUserProfileSrc)
                }

                if(loginUserRole=="[ROLE_ADMIN]") {
                    userInfoToggle.css("border", "solid 5px gold");
                }
            
            });
        </script>
    </body>
</th:block>
</html>