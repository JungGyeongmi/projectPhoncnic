<!-- user id 받아서 해당 게시물만 띄워주면 된다 -->
<!DOCTYPE html>
<html lang="ko" xmls:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>user gallery</title>
</head>

<body>
  <h1>유저 갤러리 리스트</h1>
  <ul>
    <li th:each="dto : ${galleryDTOList}">
      <span class="galleryList" th:data-gno="${dto.gno}">
        [[${dto}]]
      </span>
    </li>
  </ul>
  <h4>임시 결과물 업로드 : RESTCONTROLLERTEST</h4>
  <div class="uploadResult">

  </div>
</body>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script th:inline="javascript">
  $(function () {

    /*[+
        var showUrl = [[@{/manage/gallery/read}]];
    +]*/

    var targetGno=0;
    var uploadResult = $(".uploadResult");

    /* target의 gno 가져옴 */
    $(".galleryList").click(function (){
      targetGno = $(this).data("gno");
      console.log(targetGno);
      getGalleryDetails();
    });

    function getGalleryDetails() {
      $.post(showUrl +"/"+ targetGno, function (dto) {
        console.log("dto "+dto.gno);
        var str = "";
        str += `<div>${dto.gno}</div><div>${dto.id}</div><div>${dto.title}</div><div>${dto.content}</div>
        `
        uploadResult.html(str);
      }).done(function () {
        console.log("post success");
      });
    }

  });

</script>

</html>