<html lang="ko" xmls:th="http://www.thymeleaf.org">

    <h1>mypage</h1>
    
<form id="memberfrm" action="">
<table border="1">
    <tr>
        <th scope="col">아이디</th>
        <th scope="col">비밀번호</th>
        <th scope="col">닉네임</th>
        <th scope="col">가입일</th>
        <th scope="col">수정</th>
        <th scope="col">탈퇴</th>

    </tr>
    <tr th:each="dto : ${memberDTO}">
        <td><input type="text" th:value=${dto.id} name=id readonly></td>
        <td><input type="text" th:value=${dto.password} name=password></td>
        <td><input type="text" th:value=${dto.nickname} name=nickname></td>
        <td><input type="text" th:value=${dto.regdate}  readonly></td>
        <td ><button id="memberModifyBtn" type ="button">수정</button></td>
        <td ><button id="memberOutBtn" type ="button">회원탈퇴</button></td>
        
    </tr>
</form> 
<form id="lookfrm" action="">
    <input type="hidden" th:value="${memberDTO.id}" name="id" id="">
</table> <br>
    <table border="1">
    <tr>
        <th scope="col">hairname</th>
        <th scope="col">hairpath</th>
        <th scope="col">clothesname</th>
        <th scope="col">clothespath</th>
        <th scope="col">look 수정</th>

    </tr>
    <tr th:each="hdto : ${hairDTO}">
        <td>
            <select name="hairname" id="">
                <option th:value="${hdto.hairname}">헤어 선택</option>
            <option th:value="hair1">hair1</option>
            <option th:value="hair2">hair2</option>
            <option th:value="hair3">hair3</option>
        </select>
        <input type="text" th:value=${hdto.hairname} readonly>
    </td>
        <td><input type="text" th:value=${hdto.hairpath} name=hairpath></td>

        <th:block th:each="cdto : ${clothesDTO}">
        <td>
            <select name="clothesname" id="">
                <option th:value="${cdto.clothesname}">옷 선택</option>
                <option th:value="clothes1">clothes1</option>
                <option th:value="clothes2">clothes2</option>
                <option th:value="clothes3">clothes3</option>
            </select><input type="text" th:value=${cdto.clothesname} readonly></td>
        <td><input type="text" th:value=${cdto.clothespath} name=clothespath></td>
        <th:block/>
        <td ><button  id="lookModifyBtn" type ="button">수정</button></td>
    </tr>
 

    </tr>

</form>

</table> <br>
     <table border="1">
    <tr><th scope="col">팔로우한 artist</th></tr>

    <tr th:each="adto : ${afollowDTO}">
        <td>
            <input type="text" th:value="${adto}" readonly>
            <button th:value="${memberDTO.id}" type="button" class="artistRemoveBtn">팔로우 취소</button>
        </td>
    </tr>
</table>
<table border="1">
    <tr>
        <th scope="col">팔로우한 dyning</th>
    </tr>
    <tr th:each="ddto : ${dfollowDTO}">
        <td><input type="text" name="name" th:value="${ddto}" readonly>
            <button class="dyningRemoveBtn" th:value="${memberDTO.id}" type="button">팔로우취소</button>
        </td>
    </tr>
</table> <br>

    <table border="1">
    <tr>
        <th scope="col">DNO</th>
        <th scope="col">이모지타입</th>
        <th scope="col">이모지path</th>
        <th scope="col">등록날짜</th>
        <th scope="col">삭제</th>
    </tr>
    <tr th:each="edto : ${emojiDTO}" th:if="${edto.dno}!=0">
        <td >[[${edto.dno}]]</td>
        <td >[[${edto.emojitype}]]</td>
        <td >[[${edto.emojipath}]]</td>
        <td >[[${edto.regdate}]]</td>
        <td ><button class="emojiRemoveBtn" th:value="${edto.eno}" type="button">삭제</button></td>
    </tr>

    <table border="1">
        <tr>
            <th scope="col">GNO</th>
            <th scope="col">이모지타입</th>
            <th scope="col">이모지path</th>
            <th scope="col">등록날짜</th>
            <th scope="col">삭제</th>
        </tr>
        <tr th:each="edto : ${emojiDTO}" th:if="${edto.gno}!=0">
            <td >[[${edto.gno}]]</td>
            <td >[[${edto.emojitype}]]</td>
            <td >[[${edto.emojipath}]]</td>
            <td >[[${edto.regdate}]]</td>
            <td ><button class="emojiRemoveBtn" th:value="${edto.eno}" type="button">삭제</button></td>

        </tr>

   
    
 
<<<<<<< HEAD
</table> <br>
<script  src="http://code.jquery.com/jquery-latest.min.js"></script>
<script th:inline="javascript">
                
    var memberform  = document.querySelector("#memberfrm");
    var lookform  = document.querySelector("#lookfrm");
    var dyningfrm  = document.querySelector("#dyningfrm");
    var memberModifyBtn = document.querySelector("#memberModifyBtn");
    var lookModifyBtn = document.querySelector("#lookModifyBtn");
    var artistRemoveBtn = document.querySelector("#artistRemoveBtn");
    var dyningRemoveBtn = document.querySelector("#dyningRemoveBtn");

    /*[+var urlmembermodify = [[@{/main/mypage/membermodify}]];+]*/
    /*[+var urllookmodify = [[@{/main/mypage/lookmodify}]];+]*/
    /*[+var urlartistremove = [[@{/main/mypage/artistremove}]];+]*/
    /*[+var urldyningremove = [[@{/main/mypage/dyningremove}]];+]*/
    /*[+var urlemojiremove = [[@{/main/mypage/emojiremove}]];+]*/
    /*[+var urlmemberout = [[@{/main/mypage/memberremove}]];+]*/
=======
</table>
<table border="1">
    <tr>
        <th scope="col">팔로우한 dyning</th>
    </tr>
    <tr th:each="ddto : ${dfollowDTO}">
        <td><input type="text" name="name" th:value="${ddto}" readonly>
            <button class="dyningRemoveBtn" th:value="${memberDTO.id}" type="button">팔로우취소</button>
        </td>
    </tr>
</table> <br>

    <table border="1">
    <tr>
        <th scope="col">DNO</th>
        <th scope="col">이모지타입</th>
        <th scope="col">이모지path</th>
        <th scope="col">등록날짜</th>
        <th scope="col">삭제</th>
    </tr>
    <tr th:each="edto : ${emojiDTO}" th:if="${edto.dno}!=0">
        <td >[[${edto.dno}]]</td>
        <td >[[${edto.emojitype}]]</td>
        <td >[[${edto.emojipath}]]</td>
        <td >[[${edto.regdate}]]</td>
        <td ><button class="emojiRemoveBtn" th:value="${edto.eno}" type="button">삭제</button></td>
    </tr>
>>>>>>> T_gallery

    <table border="1">
        <tr>
            <th scope="col">GNO</th>
            <th scope="col">이모지타입</th>
            <th scope="col">이모지path</th>
            <th scope="col">등록날짜</th>
            <th scope="col">삭제</th>
        </tr>
        <tr th:each="edto : ${emojiDTO}" th:if="${edto.gno}!=0">
            <td >[[${edto.gno}]]</td>
            <td >[[${edto.emojitype}]]</td>
            <td >[[${edto.emojipath}]]</td>
            <td >[[${edto.regdate}]]</td>
            <td ><button class="emojiRemoveBtn" th:value="${edto.eno}" type="button">삭제</button></td>

        </tr>

<<<<<<< HEAD
    
=======
   
    
 
</table> <br>
<script  src="http://code.jquery.com/jquery-latest.min.js"></script>
<script th:inline="javascript">
                
    var memberform  = document.querySelector("#memberfrm");
    var lookform  = document.querySelector("#lookfrm");
    var dyningfrm  = document.querySelector("#dyningfrm");
    var memberModifyBtn = document.querySelector("#memberModifyBtn");
    var lookModifyBtn = document.querySelector("#lookModifyBtn");
    var artistRemoveBtn = document.querySelector("#artistRemoveBtn");
    var dyningRemoveBtn = document.querySelector("#dyningRemoveBtn");

    /*[+var urlmembermodify = [[@{/main/mypage/membermodify}]];+]*/
    /*[+var urllookmodify = [[@{/main/mypage/lookmodify}]];+]*/
    /*[+var urlartistremove = [[@{/main/mypage/artistremove}]];+]*/
    /*[+var urldyningremove = [[@{/main/mypage/dyningremove}]];+]*/
    /*[+var urlemojiremove = [[@{/main/mypage/emojiremove}]];+]*/
    /*[+var urlmemberout = [[@{/main/mypage/memberremove}]];+]*/
>>>>>>> T_gallery


    document.querySelector("#memberModifyBtn").onclick = function(){
        
        if(!confirm("계정 정보를 수정하시겠습니까?")){
        return;
        }else{
            memberform.setAttribute("action",urlmembermodify);
            memberform.setAttribute("method","post");
            memberform.submit();
        alert("수정되었습니다")
        }
    }
    document.querySelector("#lookModifyBtn").onclick = function(){
        
        if(!confirm("캐릭터의 옷을 변경하시겠습니까?")){
        return;
        }else{
            lookform.setAttribute("action",urllookmodify);
            lookform.setAttribute("method","post");
            lookform.submit();
        alert("수정되었습니다")

<<<<<<< HEAD
=======
    


    document.querySelector("#memberModifyBtn").onclick = function(){
        
        if(!confirm("계정 정보를 수정하시겠습니까?")){
        return;
        }else{
            memberform.setAttribute("action",urlmembermodify);
            memberform.setAttribute("method","post");
            memberform.submit();
        alert("수정되었습니다")
        }
    }
    document.querySelector("#lookModifyBtn").onclick = function(){
        
        if(!confirm("캐릭터의 옷을 변경하시겠습니까?")){
        return;
        }else{
            lookform.setAttribute("action",urllookmodify);
            lookform.setAttribute("method","post");
            lookform.submit();
        alert("수정되었습니다")

>>>>>>> T_gallery
        }
    }
    document.querySelector("#memberOutBtn").onclick = function(){
        
        if(!confirm("정말 탈퇴하시겠습니까?(이 동작은 되돌릴 수 없습니다)")){
        return;
        }else{
            memberform.setAttribute("action",urlmemberout);
            memberform.setAttribute("method","post");
            memberform.submit();
        alert("다음에 또 만나요!")

        }
    }

    $(".artistRemoveBtn").click( function(){
        var id =$(this).val();
        var artistname=$(this).prev().val();

        var data = { id:id ,artistname: artistname};

        console.log(data);

        $.ajax({
            url: urlartistremove +"/"+ id + "/" + artistname,
            type: "DELETE",
            data: JSON.stringify(data),
            contentType: "application/json; charset=utf-8",
            dataType: "text",
            success: function (result) {
                console.log("result: " + result);
                self.location.reload();
        }
        })
    });

    $(".dyningRemoveBtn").click( function(){
        var id =$(this).val();
        var dyningname=$(this).prev().val();

        var data = { id:id ,dyningname: dyningname};

        console.log(data);

        $.ajax({
            url: urldyningremove +"/"+ id + "/" + dyningname,
            type: "DELETE",
            data: JSON.stringify(data),
            contentType: "application/json; charset=utf-8",
            dataType: "text",
            success: function (result) {
                console.log("result: " + result);
                self.location.reload();
        }
        })
    });

    $(".emojiRemoveBtn").click( function(){
        var eno =$(this).val();
        var data = {eno:eno};

        console.log(data);

        $.ajax({
            url: urlemojiremove +"/"+ eno,
            type: "DELETE",
            data: JSON.stringify(data),
            contentType: "application/json; charset=utf-8",
            dataType: "text",
            success: function (result) {
                console.log("result: " + result);
                self.location.reload();
        }
        })
    });
           
    </script>
</html>