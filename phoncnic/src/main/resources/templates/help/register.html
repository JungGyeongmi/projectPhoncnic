<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{layout/basic :: setContent(~{::content})}">
    <th:block th:fragment="content">
        <h1>고객센터</h1>
        <h3>문의 작성</h3>
        <form id="frm">
            <div>
                <div>
                    <label>문의 종류</label> <br>
                    <select name="qtype" id="">
                        <option value="type1">type1</option>
                        <option value="type2">type2</option>
                        <option value="type3">type3</option>
                        <option value="type4">type4</option>
                    </select>
                </div>
                <th:block th:if="${id} != ''">
                    <div>
                        <label>작성자</label> <br>
                        <input type="text" name="writeremail" id="inputId" th:value="${id}">
                        <span>답변 받으실 이메일이 맞는지 확인해주세요</span>
                    </div>
                </th:block>
                <th:block th:if="${id} == ''">
                    <div>
                        <label>작성자</label> <br>
                        <input type="text" name="writer" id="inputId"> 
                        <span>답변 받으실 이메일을 입력해주세요</span>
                    </div>
                </th:block>
                <div>
                    <label>제목</label> <br>
                    <input type="text" name="title">
                </div>
                <div>
                    <label>내용</label> <br>
                    <textarea name="content" id="" cols="30" rows="10"></textarea>
                </div>
                <div>
                    <label>비밀번호</label> <br>
                    <input type="text" name="password" id="pwInput" maxlength="4">
                    <span>숫자 4자리를 입력해주세요</span>
                </div> <br>
                <button id="submitBtn" type="button" >등록</button>
                <a th:href="@{/help/list}"><button type="button">목록</button></a>
            </div>
        </form>

        <script th:inline="javascript">

           
            $(function() {

                var form = $("#frm");

                /*[+
                  var qnaRegiUrl = [[@{/help/register}]];
                +]*/

                $("#submitBtn").on("click", function(e) {
                    
                    if($("input[name=writeremail]").val().trim().length==0) {
                        checkerSwal("이메일", $("input[name=writeremail]"));
                    } else if($("input[name=title]").val().trim().length==0) {
                        checkerSwal("제목", $("input[name=title]"));
                    } else if($("textarea[name=content]").val().trim().length==0) {
                        checkerSwal("내용", $("textarea[name=content]"));
                    } else if($("input[name=password]").val().trim().length==0) {
                        checkerSwal("비밀번호", $("input[name=password]"));
                    } else {
                        form.attr("method", "post");
                        form.attr("action", qnaRegiUrl);
                        form.submit();
                    }
                });

                var checkerSwal = function(msg, target) {
                    swal({
                        title: "CHECK!",
                        text: msg+"을 입력해주세요",
                        icon: "warning",
                        button: false,
                    }).then((check) => {
                        target.focus();
                        if (check) {
                            return;
                        }
                    });
                }

            });

        </script>
    
    </th:block>
</th:block>